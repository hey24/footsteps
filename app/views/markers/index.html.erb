<div id="map" data-marker-coordinates="<%= @marker_coordinates.to_json %>" style="height: 500px;"></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiY2xhcG9ydCIsImEiOiJjbGV5N2EycGUwa3FvM3FwNGw0bTB1d3BuIn0.Mxbnq-7KTp7hMtPIFoPYmA';
const map = new mapboxgl.Map({
container: 'map',
// Choose from Mapbox's core styles, or make your own style with Mapbox Studio
style: 'mapbox://styles/mapbox/streets-v12',
center: [-73.95, 40.7],
zoom: 14
});

map.on('load', () => {


  var markerCoordinates = JSON.parse(document.getElementById("map").dataset.markerCoordinates);

  console.log(markerCoordinates)
  map.addSource('route', {
    'type': 'geojson',
    'data': {
      'type': 'Feature',
      'properties': {},
      'geometry': {
        'type': 'LineString',
        'coordinates': markerCoordinates
      }
    }
  });

  map.addLayer({
  'id': 'route',
  'type': 'line',
  'source': 'route',
  'layout': {
  'line-join': 'round',
  'line-cap': 'round'
  },
  'paint': {
  'line-color': '#888',
  'line-width': 8
  }
  });
});
</script>
